@startuml
hide circle
skinparam classAttributeIconSize 0

class SecuenciaDeBloques{
-posicion: PosicionActual
-bloques: Collection

+agregarBloque(bloque:  <<interface>>Bloque, posicion: PosicionActual)
+realizarSecuencia()
+repetirSecuencia(cantidadDeVeces: Int)
+guardarAlgoritmo(nombre: String)
+realizarSecuenciaInvertida()
}

class BloqueRepetir{
-cantidadRepeticiones: Int
-bloques: Collection

+ejecutar()
}


interface Bloque{
-posicion: PosicionActual

+{static} crearConPosicion(posicion: PosicionActual)
+{abstract} ejecutar()
+{abstract}ejecutarInvertido()
}


class BloqueInvertir{
+{abstract}ejecutar()
}

class BloqueMoverDerecha{
-personaje: Personaje

+ejecutar()
+ejecutarInvertido()
}

class BloqueMoverIzquierda{
-personaje: Personaje

+ejecutar()
+ejecutarInvertido()
}

class BloqueMoverArriba{
-personaje: Personaje

+ejecutar()
+ejecutarInvertido()
}

class BloqueMoverAbajo{
-personaje: Personaje

+ejecutar()
+ejecutarInvertido()
}


class BloqueLevantarLapiz{
+ejecutar()
+ejecutarInvertido()
}

class BloqueBajarLapiz{
+ejecutar()
+ejecutarInvertido()
}

class Personaje{
-posicion
-lapizActual

+{static} crearConPosicion(posicion: PosicionActual)

+subirLapiz()
+bajarLapiz()
+mover(posicionDestino: PosicionActual)
}

class LapizArriba{
+mover(posicionDestino: PosicionActual)
}

class LapizAbajo{
+mover(posicionDestino: PosicionActual)
}


class PosicionActual{
-izquierda
-derecha
-arriba
-abajo
-actual

+mover(posicionSiguiente: PosicionActual)
+dibujar(posicionSiguiente: PosicionActual)
+actualizarPosicion(posicionSiguiente: PosicionActual)
+izquierda()
+derecha()
+arriba()
+abajo()
}



SecuenciaDeBloques "1" --> "0..*" Bloque


Bloque <|-- BloqueMoverDerecha
Bloque <|-- BloqueMoverIzquierda
Bloque <|-- BloqueMoverArriba
Bloque <|-- BloqueMoverAbajo

Bloque <|-- BloqueLevantarLapiz
Bloque <|-- BloqueBajarLapiz

Bloque <|-- BloqueRepetir
Bloque <|-- BloqueInvertir


BloqueMoverDerecha --> Personaje
BloqueMoverIzquierda --> Personaje
BloqueMoverArriba --> Personaje
BloqueMoverAbajo --> Personaje

BloqueLevantarLapiz --> Personaje
BloqueBajarLapiz --> Personaje

Personaje --> LapizArriba
Personaje --> LapizAbajo

LapizArriba --> PosicionActual
LapizAbajo --> PosicionActual
@enduml
